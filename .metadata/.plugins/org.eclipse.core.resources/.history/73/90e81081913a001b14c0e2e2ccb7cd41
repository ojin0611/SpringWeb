package com.example.biz;

import javax.servlet.http.HttpServletRequest;

import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.bind.annotation.RequestParam;

import com.example.vo.UserVO;

@Controller
public class RequestController {
	/*
	 * @RequestMapping(value = "/confirm", method = RequestMethod.GET) // method가
	 * 일치하지 않으면 405 error // 서버는 html 파일의 name tag만 읽는다.
	 */
	public String confirm(HttpServletRequest request, Model model) {
		String userid = request.getParameter("userid");
		String passwd = request.getParameter("passwd");
		String name = request.getParameter("name");
		int age = Integer.parseInt(request.getParameter("age"));
		String gender = request.getParameter("gender");
		String[] hobbies = request.getParameterValues("hobby");

		model.addAttribute("userid", userid);
		model.addAttribute("passwd", passwd);
		model.addAttribute("name", name);
		model.addAttribute("age", age);
		model.addAttribute("gender", gender);
		model.addAttribute("hobbies", hobbies);
		return "confirm"; // /WEB-INF/views/confirm.jsp
	}

	// @RequestMapping(value = "/confirm", method = RequestMethod.GET)
	// RequestParam 쓰면 형변환 안해줘도 된다.
	public String confirm(@RequestParam("userid") String userid, @RequestParam("passwd") String passwd,
			@RequestParam("name") String name, @RequestParam("age") int age, @RequestParam("gender") String gender,
			@RequestParam("hobby") String[] hobbies, Model model) {
		model.addAttribute("userid", userid);
		model.addAttribute("passwd", passwd);
		model.addAttribute("name", name);
		model.addAttribute("age", age);
		model.addAttribute("gender", gender);
		return "confirm";
	}

	@RequestMapping(value = "/confirm", method = RequestMethod.GET)
	public String confirm(@RequestParam("userid") String userid, @RequestParam("passwd") String passwd,
			@RequestParam("name") String name, @RequestParam("age") int age, @RequestParam("gender") String gender,
			Model model) {
		UserVO userVO = new UserVO();
		userVO.setUserid(userid);
		userVO.setPasswd(passwd);
		userVO.setName(name);
		userVO.setAge(age);
		userVO.setGender(gender);
		model.addAttribute("userVO", userVO);
		return "confirm";
	}
}